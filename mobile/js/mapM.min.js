function resize(){var e=$("#map");e.height($(window).height()),e.width($(window).width()),map.updateSize()}window.app={};var app=window.app;app.Drag=function(){ol.interaction.Pointer.call(this,{handleDownEvent:app.Drag.prototype.handleDownEvent,handleDragEvent:app.Drag.prototype.handleDragEvent,handleMoveEvent:app.Drag.prototype.handleMoveEvent,handleUpEvent:app.Drag.prototype.handleUpEvent}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0},ol.inherits(app.Drag,ol.interaction.Pointer),app.Drag.prototype.handleDownEvent=function(e){var t=e.map,o=t.forEachFeatureAtPixel(e.pixel,function(e){return e});return o&&(this.coordinate_=e.coordinate,this.feature_=o),!!o},app.Drag.prototype.handleDragEvent=function(e){var t=e.map,o=(t.forEachFeatureAtPixel(e.pixel,function(e){return e}),e.coordinate[0]-this.coordinate_[0]),a=e.coordinate[1]-this.coordinate_[1],n=this.feature_.getGeometry();n.translate(o,a),this.coordinate_[0]=e.coordinate[0],this.coordinate_[1]=e.coordinate[1],$("#position_lon").val(e.coordinate[0]),$("#position_lat").val(e.coordinate[1])},app.Drag.prototype.handleMoveEvent=function(e){if(this.cursor_){var t=e.map,o=t.forEachFeatureAtPixel(e.pixel,function(e){return e}),a=e.map.getTargetElement();o?a.style.cursor!=this.cursor_&&(this.previousCursor_=a.style.cursor,a.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(a.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},app.Drag.prototype.handleUpEvent=function(){return this.coordinate_=null,this.feature_=null,!1};var pointFeature=new ol.Feature(new ol.geom.Point([-2181672.2951651528,-12761559.658812637]));pointFeature.setId(800);var vectorSource=new ol.source.Vector({});vectorSource.addFeature(pointFeature);var iconStyle=new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(216, 30, 115,.7)"}),radius:16})}),iconNull=new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0,0)"}),radius:0,snapToPixel:!1})}),vectorLayer=new ol.layer.Vector({source:vectorSource,style:iconStyle}),projection=new ol.proj.Projection({code:"EPSG:3067",extent:[-3670733.46,4601971.85,642319.78,9362767],units:"m"});ol.proj.addProjection(projection),ol.proj.addCoordinateTransforms("EPSG:4326",projection,function(e){return[WGStoCHy(e[1],e[0]),WGStoCHx(e[1],e[0])]},function(e){return[CHtoWGSlng(e[0],e[1]),CHtoWGSlat(e[0],e[1])]});var extent=[-3670733.46,4601971.85,642319.78,9362767],rasterLayer=new ol.layer.Tile({source:new ol.source.XYZ({url:"http://geoserver.hel.fi/mapproxy/wmts/osm-sm-hq/etrs_tm35fin_hq/{z}/{x}/{y}.png",tilePixelRatio:2,extent:extent})}),view=new ol.View({center:[-2181672.2951651528,-12761559.658812637],zoom:11,maxZoom:14,minZoom:4}),map=new ol.Map({interactions:ol.interaction.defaults().extend([new app.Drag]),layers:[rasterLayer,vectorLayer],target:document.getElementById("map"),view:view});map.on("click",function(e){vectorSource.getFeatureById(800).setStyle(iconNull),vectorSource.removeFeature(vectorSource.getFeatureById(800)),pointFeature=new ol.Feature(new ol.geom.Point(map.getCoordinateFromPixel(e.pixel))),pointFeature.setId(800),pointFeature.setStyle(iconStyle),vectorSource.addFeature(pointFeature),tmp=800,$("#position_lon").val(map.getCoordinateFromPixel(e.pixel)[0]),$("#position_lat").val(map.getCoordinateFromPixel(e.pixel)[1])});
//# sourceMappingURL=mapM.min.js.map